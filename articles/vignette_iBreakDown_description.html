<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Explanations in natural language • iBreakDown</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- dalexverse --><link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Explanations in natural language">
<meta property="og:description" content="iBreakDown">
<meta property="og:image" content="/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- google analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14"></script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">iBreakDown</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy" class="external-link">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/" class="external-link">MI^2 DataLab</a> </span>
          <span class="version version-default">2.1</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette_iBreakDown_description.html">Explanations in natural language</a>
    </li>
    <li>
      <a href="../articles/vignette_iBreakDown_titanic.html">General introduction: iBreakDown plots for Sinking of the RMS Titanic</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/iBreakDown/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vignette_iBreakDown_description_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Explanations in natural language</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ModelOriented/iBreakDown/blob/HEAD/vignettes/vignette_iBreakDown_description.Rmd" class="external-link"><code>vignettes/vignette_iBreakDown_description.Rmd</code></a></small>
      <div class="hidden name"><code>vignette_iBreakDown_description.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>We address the problem of the insuficient interpretability of explanations for domain experts. We solve this issue by introducing <code><a href="../reference/describe.html">describe()</a></code> function, which automatically generates natural language descriptions of explanations generated with <code>iBrakDown</code> package.</p>
</div>
<div class="section level2">
<h2 id="ibreakdown-package">iBreakDown Package<a class="anchor" aria-label="anchor" href="#ibreakdown-package"></a>
</h2>
<p>The <code>iBreakDown</code> package allows for generating feature attribution explanations. Feature attribution explanations justify a model’s prediction by showing which of the model’s variables affect the prediction and to what extent. It is done by attaching to each variable an importance coefficient, which sum should approximate the model’s prediction.</p>
<p>There are two methods used by <code>iBreakDown</code> package: <code><a href="../reference/break_down_uncertainty.html">shap()</a></code> and <code><a href="../reference/break_down.html">break_down()</a></code>.</p>
<p>Function <code><a href="../reference/break_down_uncertainty.html">shap()</a></code> generates a SHAP explanation, that is, the function assigns Shapley values to each variable. Function <code>break_down</code> uses break_down algorithm to generate an efficient approximation of the Shapley values. We show how to generate both explanations on an easy example using titanic data set and explainers from <code>DALEX</code> package.</p>
<p>First, we load the data set and build a random forest model classifying which of the passengers survived the sinking of the Titanic. Then, using <code>DALEX</code> package, we generate an explainer of the model. Lastly, we select a random passenger, which prediction’s should be explained.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://dalex.drwhy.ai" class="external-link">"DALEX"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ModelOriented.github.io/iBreakDown/" class="external-link">"iBreakDown"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/" class="external-link">"randomForest"</a></span><span class="op">)</span>
<span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span>

<span class="va">model_titanic_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></span><span class="op">(</span><span class="va">survived</span> <span class="op">==</span> <span class="st">"yes"</span> <span class="op">~</span> <span class="va">.</span>,
                                 data <span class="op">=</span> <span class="va">titanic</span> 
                                 <span class="op">)</span>

<span class="va">explain_titanic_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dalex.drwhy.ai/reference/explain.html" class="external-link">explain</a></span><span class="op">(</span><span class="va">model_titanic_rf</span>,
                            data <span class="op">=</span> <span class="va">titanic</span><span class="op">[</span>,<span class="op">-</span><span class="fl">9</span><span class="op">]</span>,
                            y <span class="op">=</span> <span class="va">titanic</span><span class="op">$</span><span class="va">survived</span> <span class="op">==</span> <span class="st">"yes"</span>,
                            label <span class="op">=</span> <span class="st">"Random Forest"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Preparation of a new explainer is initiated</span>
<span class="co">#&gt;   -&gt; model label       :  Random Forest </span>
<span class="co">#&gt;   -&gt; data              :  2099  rows  8  cols </span>
<span class="co">#&gt;   -&gt; target variable   :  2099  values </span>
<span class="co">#&gt;   -&gt; predict function  :  yhat.randomForest  will be used ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="co">#&gt;   -&gt; predicted values  :  No value for predict function target column. ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="co">#&gt;   -&gt; model_info        :  package randomForest , ver. 4.7.1 , task regression ( <span style="color: #BBBB00;"> default </span> ) </span>
<span class="co">#&gt;   -&gt; model_info        :  Model info detected regression task but 'y' is a logical .  ( <span style="color: #BB0000;"> WARNING </span> )</span>
<span class="co">#&gt;   -&gt; model_info        :  By deafult regressions tasks supports only numercical 'y' parameter. </span>
<span class="co">#&gt;   -&gt; model_info        :  Consider changing to numerical vector.</span>
<span class="co">#&gt;   -&gt; model_info        :  Otherwise I will not be able to calculate residuals or loss function.</span>
<span class="co">#&gt;   -&gt; predicted values  :  numerical, min =  0.005490247 , mean =  0.3242123 , max =  0.9918797  </span>
<span class="co">#&gt;   -&gt; residual function :  difference between y and yhat ( <span style="color: #BBBB00;"> default </span> )</span>
<span class="co">#&gt;   -&gt; residuals         :  numerical, min =  -0.8159024 , mean =  0.0002278804 , max =  0.909422  </span>
<span class="co">#&gt;  <span style="color: #00BB00;"> A new explainer has been created! </span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">passanger</span> <span class="op">&lt;-</span> <span class="va">titanic</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span> ,<span class="op">-</span><span class="fl">9</span><span class="op">]</span>
<span class="va">passanger</span></code></pre></div>
<pre><code><span class="co">#&gt;      gender age            class    embarked country fare sibsp parch</span>
<span class="co">#&gt; 1754   male  35 victualling crew Southampton England    0     0     0</span></code></pre>
<p>Now we are ready for generating <code><a href="../reference/break_down_uncertainty.html">shap()</a></code> and <code>iBreakDown()</code> explanations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bd_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/break_down.html">break_down</a></span><span class="op">(</span><span class="va">explain_titanic_rf</span>,
                    <span class="va">passanger</span>,
                    keep_distributions <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># distributions should be kept</span>
<span class="va">shap_rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/break_down_uncertainty.html">shap</a></span><span class="op">(</span><span class="va">explain_titanic_rf</span>,
                <span class="va">passanger</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bd_rf</span><span class="op">)</span></code></pre></div>
<p><img src="vignette_iBreakDown_description_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">shap_rf</span><span class="op">)</span></code></pre></div>
<p><img src="vignette_iBreakDown_description_files/figure-html/unnamed-chunk-3-2.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="describing-an-explanation">Describing an explanation<a class="anchor" aria-label="anchor" href="#describing-an-explanation"></a>
</h2>
<p>The displayed explanations, despite their visual clarity, may not be interpretable for someone not familiar with iBreakDown or shap explanation. Therefore, we generate a simple natural language description for both explainers.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">shap_rf</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.006.</span></code></pre>
</div>
<div class="section level2">
<h2 id="parameters-of-describe-function">Parameters of describe() function<a class="anchor" aria-label="anchor" href="#parameters-of-describe-function"></a>
</h2>
<p>Natural language descriptions should be flexible enough to generate a description with the desired level of specificity and length. We describe the parameters used for describing both explanations. As both explanations have the same parameters, we turn our attention to describe the iBreakDown explanation.</p>
<div class="section level4">
<h4 id="adjusting-nonsignificance-treshold">Adjusting nonsignificance treshold<a class="anchor" aria-label="anchor" href="#adjusting-nonsignificance-treshold"></a>
</h4>
<p>The nonsignificance treshold controls which predictions are close to the average prediction. By setting a higher value, more predictions will be described as close to the average model prediction, and more variables will be described as nonsignificant.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, nonsignificance_treshold <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is close to the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
</div>
<div class="section level4">
<h4 id="adjusting-label-of-the-explanation">Adjusting label of the explanation<a class="anchor" aria-label="anchor" href="#adjusting-label-of-the-explanation"></a>
</h4>
<p>The label of the prediction could be changed to display more specific descriptions.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, 
         label <span class="op">=</span> <span class="st">"the passanger survived with probability"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the passanger survived with probability 0.15 which is lower than the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
</div>
<div class="section level4">
<h4 id="short-descriptions">Short descriptions<a class="anchor" aria-label="anchor" href="#short-descriptions"></a>
</h4>
<p>Generating short descriptions can be useful, as they can make nice plot subtitles.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, short_description <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15. The most important variable, which decreases model's prediction, is gender.</span></code></pre>
</div>
<div class="section level4">
<h4 id="displaying-values">Displaying values<a class="anchor" aria-label="anchor" href="#displaying-values"></a>
</h4>
<p>Displaying variable values can easily make the description more informative.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, display_values <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender (= male).</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
</div>
<div class="section level4">
<h4 id="displaying-numbers">Displaying numbers<a class="anchor" aria-label="anchor" href="#displaying-numbers"></a>
</h4>
<p>Displaying numbers changes the whole argumentation style making the description longer.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, display_numbers <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction 0.324. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable is gender. It decreases the prediction by 0.099.</span>
<span class="co">#&gt; The second most important variable is country. It decreases the prediction by 0.029.</span>
<span class="co">#&gt; The third most important variable is age. It decreases the prediction by 0.028.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
</div>
<div class="section level4">
<h4 id="distribution-details">Distribution details<a class="anchor" aria-label="anchor" href="#distribution-details"></a>
</h4>
<p>Describing distribution details is useful if we want to have a big picture about other instances’ behaviour.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">bd_rf</span>, display_distribution_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction.Model predictions range from 0.005 to 0.992. The distribution of Random Forest's predictions is right-skewed with average equal to 0.324 and median equal to 0.217. The standard deviation is 0.28. Model's prediction for the selected instance is in the second quartile.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.018.</span></code></pre>
</div>
<div class="section level4">
<h4 id="shap">SHAP<a class="anchor" aria-label="anchor" href="#shap"></a>
</h4>
<p>Explanations generated by <code><a href="../reference/break_down_uncertainty.html">shap()</a></code> functions have the same arguments expected from <code>display_shap</code>, what add an additional information, if the calculated variable’s contributions have high or low variability.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">shap_rf</span>, display_shap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the prediction for the selected instance is 0.15 which is lower than the average model prediction. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable that decrease the prediction is gender.</span>
<span class="co">#&gt; The average contribution of all the above variables is significant.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.006.</span></code></pre>
</div>
<div class="section level4">
<h4 id="combining-all-the-parameters">Combining all the parameters<a class="anchor" aria-label="anchor" href="#combining-all-the-parameters"></a>
</h4>
<p>Of course, all the arguments can be set according to preferences allowing for flexible natural language descriptions.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe.html">describe</a></span><span class="op">(</span><span class="va">shap_rf</span>,
         label <span class="op">=</span> <span class="st">"the passanger survived with probability"</span>,
         display_values <span class="op">=</span> <span class="cn">TRUE</span>,
         display_numbers <span class="op">=</span> <span class="cn">TRUE</span>,
         display_shap <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Random Forest predicts, that the passanger survived with probability 0.15 which is lower than the average model prediction 0.324. For the selected instance model's prediction is lower, than for 70% of all observations.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The most important variable is gender (= male). It decreases the prediction by 0.106.</span>
<span class="co">#&gt; The second most important variable is age (= 35). It decreases the prediction by 0.034.</span>
<span class="co">#&gt; The third most important variable is class (= victualling crew). It decreases the prediction by 0.028.</span>
<span class="co">#&gt; The average contribution of all the above variables is significant.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Other variables are with less importance. The contribution of all other variables is -0.006.</span></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
